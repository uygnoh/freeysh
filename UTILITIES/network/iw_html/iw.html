<!DOCTYPE html>
<html dir="ltr" class="js olCSSsupported desktop" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>en:users:documentation:iw [Linux Wireless]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki">
<meta name="robots" content="index,follow">
<meta name="keywords" content="en,users,documentation,iw">
<link rel="search" type="application/opensearchdescription+xml" href="https://wireless.wiki.kernel.org/lib/exe/opensearch.php" title="Linux Wireless">
<link rel="start" href="https://wireless.wiki.kernel.org/">
<link rel="contents" href="https://wireless.wiki.kernel.org/en/users/documentation/iw?do=index" title="Sitemap">
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="https://wireless.wiki.kernel.org/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="https://wireless.wiki.kernel.org/feed.php?mode=list&amp;ns=en:users:documentation">
<link rel="alternate" type="text/html" title="Plain HTML" href="https://wireless.wiki.kernel.org/_export/xhtml/en/users/documentation/iw">
<link rel="alternate" type="text/plain" title="Wiki Markup" href="https://wireless.wiki.kernel.org/_export/raw/en/users/documentation/iw">
<link rel="canonical" href="https://wireless.wiki.kernel.org/en/users/documentation/iw">
<link rel="stylesheet" type="text/css" href="iw_files/css.css">
<script type="text/javascript">/*<![CDATA[*/var NS='en:users:documentation';var JSINFO = {"id":"en:users:documentation:iw","namespace":"en:users:documentation","plugin_folded":{"hide":"hide","reveal":"reveal"}};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="iw_files/js.php"></script><style type="text/css" media="screen"><!--/*--><![CDATA[/*><!--*/ .folded.hidden { display: none; } .folder .indicator { visibility: visible; } /*]]>*/--></style><style id="iris-css">.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;border-radius:0}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}.iris-square-handle,.ui-slider-handle{border:0;outline:0}</style>
<script type="text/javascript">/*<![CDATA[*/document.documentElement.className += ' olCSSsupported';
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" href="https://wireless.wiki.kernel.org/lib/tpl/dokuwiki/images/favicon.ico">
<link rel="apple-touch-icon" href="https://wireless.wiki.kernel.org/lib/tpl/dokuwiki/images/apple-touch-icon.png">
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki    showSidebar hasSidebar">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="https://wireless.wiki.kernel.org/welcome" accesskey="h" title="[H]"><img src="iw_files/logo.png" alt="" height="64" width="64"> <span>Linux Wireless</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="https://wireless.wiki.kernel.org/en/users/documentation/iw?do=login&amp;sectok=1c2307ddb9f65651391d1a226484f523" class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="/welcome" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input name="do" value="search" type="hidden"><input id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" type="text"><input value="Search" class="button" title="Search" type="submit"><div id="qsearch__out" class="ajax_qsearch JSpopup" style="display: none;"></div></div></form>            <div class="mobileTools">
                <form action="/doku.php" method="get" accept-charset="utf-8"><div class="no"><input name="id" value="en:users:documentation:iw" type="hidden"><select name="do" class="edit quickselect" title="Tools"><option value="" selected="selected">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option></optgroup></select><input value="&gt;" style="display: none;" type="submit"></div></form>            </div>
            <ul>
                <li><a href="https://wireless.wiki.kernel.org/en/users/documentation/iw?do=recent" class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="https://wireless.wiki.kernel.org/en/users/documentation/iw?do=media&amp;ns=en%3Ausers%3Adocumentation" class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="https://wireless.wiki.kernel.org/en/users/documentation/iw?do=index" class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <bdi><a href="https://wireless.wiki.kernel.org/en/users/download" class="breadcrumbs" title="en:users:download">download</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://wireless.wiki.kernel.org/en/users/documentation/modes" class="breadcrumbs" title="en:users:documentation:modes">modes</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://wireless.wiki.kernel.org/en/users" class="breadcrumbs" title="en:users">users</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://wireless.wiki.kernel.org/en/users/documentation" class="breadcrumbs" title="en:users:documentation">documentation</a></bdi> <span class="bcsep">•</span> <span class="curid"><bdi><a href="https://wireless.wiki.kernel.org/en/users/documentation/iw" class="breadcrumbs" title="en:users:documentation:iw">iw</a></bdi></span></div>
                    </div>
    
    
    <hr class="a11y">
</div></div><!-- /header -->

        <div class="wrapper group">

                            <!-- ********** ASIDE ********** -->
                <div id="dokuwiki__aside"><div class="pad aside include group">
                    <h3 class="toggle open" style="cursor: pointer; display: none;"><strong><span>−</span></strong>Sidebar</h3>
                    <div class="content" style="">
                                                                        
<p aria-expanded="true" style="">
<strong> <a href="https://wireless.wiki.kernel.org/en/users" class="wikilink1" title="en:users">Users</a> </strong>
</p>
<ul aria-expanded="true" style="">
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/users" class="wikilink1" title="en:users">main page</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/users/support" class="wikilink1" title="en:users:support">Support</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/users/drivers" class="wikilink1" title="en:users:drivers">Drivers</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/users/devices" class="wikilink1" title="en:users:devices">Devices</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/users/download" class="wikilink1" title="en:users:download">Download</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/users/documentation" class="wikilink1" title="en:users:documentation">Documentation</a></div>
</li>
</ul>

<p aria-expanded="true" style="">
<strong> <a href="https://wireless.wiki.kernel.org/en/vendors" class="wikilink1" title="en:vendors">Vendors</a> </strong>
</p>
<ul aria-expanded="true" style="">
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/vendors/vendorsupport" class="wikilink1" title="en:vendors:vendorsupport">Vendor Support</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/vendors/driverdevelopment" class="wikilink1" title="en:vendors:driverdevelopment">Driver Development</a></div>
</li>
</ul>

<p aria-expanded="true" style="">
<strong> <a href="https://wireless.wiki.kernel.org/en/developers" class="wikilink1" title="en:developers">Developers</a> </strong>
</p>
<ul aria-expanded="true" style="">
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/developers/documentation" class="wikilink1" title="en:developers:documentation">Documentation</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/developers/mailinglists" class="wikilink1" title="en:developers:mailinglists">mailing lists</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wireless.wiki.kernel.org/en/developers/todo-list" class="wikilink1" title="en:developers:todo-list">todo list</a></div>
</li>
</ul>
                                            </div>
                </div></div><!-- /aside -->
            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>en:users:documentation:iw</span></div>

                <div class="page group" style="min-height: 292px;">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle open" style="cursor: pointer;"><strong><span>−</span></strong>Table of Contents</h3>
<div style="">

<ul class="toc" aria-expanded="true" style="">
<li class="level2"><div class="li"><a href="#about_iw">About iw</a></div></li>
<li class="level2"><div class="li"><a href="#getting_iw">Getting iw</a></div></li>
<li class="level2"><div class="li"><a href="#build_requirements">Build requirements</a></div></li>
<li class="level2"><div class="li"><a href="#help">Help</a></div></li>
<li class="level2"><div class="li"><a href="#getting_device_capabilities">Getting device capabilities</a></div></li>
<li class="level2"><div class="li"><a href="#scanning">Scanning</a></div></li>
<li class="level2"><div class="li"><a href="#listening_to_events">Listening to events</a></div></li>
<li class="level2"><div class="li"><a href="#getting_link_status">Getting link status</a></div></li>
<li class="level2"><div class="li"><a href="#establishing_a_basic_connection">Establishing a basic connection</a></div></li>
<li class="level2"><div class="li"><a href="#getting_station_statistics">Getting station statistics</a></div></li>
<li class="level2"><div class="li"><a href="#getting_station_statistics_against_a_peer">Getting station statistics against a peer</a></div></li>
<li class="level2"><div class="li"><a href="#modifying_transmit_bitrates">Modifying transmit bitrates</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#modifying_tx_legacy_bitrates">Modifying tx legacy bitrates</a></div></li>
<li class="level3"><div class="li"><a href="#modifying_tx_ht_mcs_bitrates">Modifying tx HT MCS bitrates</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#setting_tx_power">Setting TX power</a></div></li>
<li class="level2"><div class="li"><a href="#power_save">Power save</a></div></li>
<li class="level2"><div class="li"><a href="#adding_interfaces_with_iw">Adding interfaces with iw</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#modifying_monitor_interface_flags">Modifying monitor interface flags</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#deleting_interfaces_with_iw">Deleting interfaces with iw</a></div></li>
<li class="level2"><div class="li"><a href="#virtual_vif_support">Virtual vif support</a></div></li>
<li class="level2"><div class="li"><a href="#updating_your_regulatory_domain">Updating your regulatory domain</a></div></li>
<li class="level2"><div class="li"><a href="#creating_and_inspecting_mesh_point_interfaces_with_iw">Creating and inspecting Mesh Point interfaces with iw</a></div></li>
<li class="level2"><div class="li"><a href="#setting_up_a_wds_peer">Setting up a WDS peer</a></div></li>
<li class="level2"><div class="li"><a href="#using_4-address_for_ap_and_client_mode">Using 4-address for AP and client mode</a></div></li>
<li class="level2"><div class="li"><a href="#creating_packet_coalesce_rules">Creating packet coalesce rules</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h2 class="sectionedit1" id="about_iw">About iw</h2>
<div class="level2">

<p>
iw is a new <a href="https://wireless.wiki.kernel.org/en/developers/documentation/nl80211" class="wikilink1" title="en:developers:documentation:nl80211">nl80211</a>
 based CLI configuration utility for wireless devices. It supports all 
new drivers that have been added to the kernel recently. The old tool 
iwconfig, which uses Wireless Extensions interface, is deprecated and 
it's strongly recommended to switch to iw and nl80211. 
</p>

<p>
Like the rest of the Linux kernel, iw is still under development. 
Features are added 'as we go'. The only documentation for iw is this 
page and output from 'iw help'. Please help expand this page. 
</p>

<p>
There is a page listing use cases with iwconfig and iw: <a href="https://wireless.wiki.kernel.org/en/users/documentation/iw/replace-iwconfig" class="wikilink1" title="en:users:documentation:iw:replace-iwconfig">replacing iwconfig</a>. 
</p>

</div>

<h2 class="sectionedit2" id="getting_iw">Getting iw</h2>
<div class="level2">

<p>
Release tarballs of iw are available from <a href="http://kernel.org/pub/software/network/iw/" class="urlextern" title="http://kernel.org/pub/software/network/iw/" rel="nofollow">http://kernel.org/pub/software/network/iw/</a>. 
</p>

<p>
Alternatively, you can download iw from git: <a href="http://git.kernel.org/?p=linux/kernel/git/jberg/iw.git" class="urlextern" title="http://git.kernel.org/?p=linux/kernel/git/jberg/iw.git" rel="nofollow">http://git.kernel.org/?p=linux/kernel/git/jberg/iw.git</a>. 
</p>

</div>

<h2 class="sectionedit3" id="build_requirements">Build requirements</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> libnl &gt;= libnl1 </div>
</li>
<li class="level1"><div class="li"> libnl-dev &gt;= libnl-dev-1 </div>
</li>
<li class="level1"><div class="li"> pkg-config Using iw requires you to have libnl, the first working version is 1.0 pre8 as this release introduced genl, <em>Generic Netlink</em>,
 which nl80211 relies on. If your distribution's libnl is a wrong 
version then you'll have to download and compile libnl yourself for now (<a href="http://www.infradead.org/~tgr/libnl/" class="urlextern" title="http://www.infradead.org/~tgr/libnl/" rel="nofollow">http://www.infradead.org/~tgr/libnl/</a>). </div>
</li>
</ul>

</div>

<h2 class="sectionedit4" id="help">Help</h2>
<div class="level2">

<p>
Just enter 
</p>
<pre class="code">iw help</pre>

<p>
on your command line and it will print out the commands it supports. 
</p>

</div>

<h2 class="sectionedit5" id="getting_device_capabilities">Getting device capabilities</h2>
<div class="level2">

<p>
Use the following to get device capabilities for all devices, such as band information (2.4 <abbr title="Gigahertz">GHz</abbr>, and 5 <abbr title="Gigahertz">GHz</abbr>), and 802.11n information: 
</p>
<pre class="code">iw list</pre>

</div>

<h2 class="sectionedit6" id="scanning">Scanning</h2>
<div class="level2">
<pre class="code">iw dev wlan0 scan</pre>

</div>

<h2 class="sectionedit7" id="listening_to_events">Listening to events</h2>
<div class="level2">

<p>
Just use 
</p>
<pre class="code">iw event</pre>

<p>
When debugging, it can be useful to see the auth/assoc/deauth/disassoc frames, use 
</p>
<pre class="code">iw event -f</pre>

<p>
and sometimes timing information is also useful: 
</p>
<pre class="code">iw event -t</pre>

</div>

<h2 class="sectionedit8" id="getting_link_status">Getting link status</h2>
<div class="level2">

<p>
To determine if you are connected to an AP or not and if you are the last TX rate used you can use the command below. 
</p>

<p>
Example output when associated to a legacy (non-802.11n) AP: 
</p>
<pre class="code">iw dev wlan0 link
Connected to 04:21:b0:e8:c8:8b (on wlan0)
        SSID: attwifi
        freq: 2437
        RX: 2272 bytes (18 packets)
        TX: 232 bytes (3 packets)
        signal: -57 dBm
        tx bitrate: 36.0 MBit/s</pre>

<p>
Example output when associated to an 802.11n AP: 
</p>
<pre class="code">iw dev wlan0 link
Connected to 68:7f:74:3b:b0:01 (on wlan0)
        SSID: tesla-5g-bcm
        freq: 5745
        RX: 30206 bytes (201 packets)
        TX: 4084 bytes (23 packets)
        signal: -31 dBm
        tx bitrate: 300.0 MBit/s MCS 15 40Mhz short GI</pre>

<p>
Example output when not connected to an AP: 
</p>
<pre class="code">iw dev wlan0 link
Not connected.</pre>

<p>
This would happen if you are not connected to an AP. To connect to an AP you can use <em>iw connect</em> if the connection requires:
</p>
<ul>
<li class="level1"><div class="li"> No encryption </div>
</li>
<li class="level2"><div class="li"> Uses WEP for encryption If you need to connect to an AP with WPA or WPA2 encryption requirements then you must use <a href="https://wireless.wiki.kernel.org/en/users/documentation/wpa_supplicant" class="wikilink1" title="en:users:documentation:wpa_supplicant">wpa_supplicant</a>. </div>
</li>
</ul>

</div>

<h2 class="sectionedit9" id="establishing_a_basic_connection">Establishing a basic connection</h2>
<div class="level2">

<p>
You can use <em>iw</em> to connect to an AP directly if and only if the AP has:
</p>
<ul>
<li class="level1"><div class="li"> No encryption </div>
</li>
<li class="level3"><div class="li"> Uses WEP for encryption It however 
should be noted that if you disconnect from the AP, which can happen 
quite frequently on a busy environment, you will need to reissue the 
command. If you do not want to do this you can just use <a href="https://wireless.wiki.kernel.org/en/users/documentation/wpa_supplicant" class="wikilink1" title="en:users:documentation:wpa_supplicant">wpa_supplicant</a> which will automatically try to reconnect you when you get disconnected. </div>
</li>
</ul>

<p>
If you do choose to deal with disconnects yourself you can use <em>iw connect</em> as follows. 
</p>

<p>
To connect to an AP that has encryption disabled, where its SSID is <em>foo</em>: 
</p>
<pre class="code">iw wlan0 connect foo</pre>

<p>
Suppose you have two APs with the SSID <em>foo</em>, and you know the one you want to connect to is on the frequency 2432, you can specify the frequency to use: 
</p>
<pre class="code">iw wlan0 connect foo 2432</pre>

<p>
To connect to an AP that uses WEP, you can use: 
</p>
<pre class="code">iw wlan0 connect foo keys 0:abcde d:1:0011223344</pre>

</div>

<h2 class="sectionedit10" id="getting_station_statistics">Getting station statistics</h2>
<div class="level2">

<p>
To get station statistic information such as the amount of tx/rx bytes, the last TX bitrate (including MCS rate) you can do: 
</p>
<pre class="code">$ iw dev wlan1 station dump
Station 12:34:56:78:9a:bc (on wlan0)
        inactive time:  304 ms
        rx bytes:       18816
        rx packets:     75
        tx bytes:       5386
        tx packets:     21
        signal:         -29 dBm
        tx bitrate:     54.0 MBit/s</pre>

</div>

<h2 class="sectionedit11" id="getting_station_statistics_against_a_peer">Getting station statistics against a peer</h2>
<div class="level2">

<p>
If you want to get specific statistics against a peer you station is communicating with you can use the following: 
</p>
<pre class="code">sudo iw dev wlan1 station get &lt;peer-MAC-address&gt;</pre>

<p>
In the case of a STA the above &lt;peer-MAC-address&gt; would be the MAC address of your AP. 
</p>

</div>

<h2 class="sectionedit12" id="modifying_transmit_bitrates">Modifying transmit bitrates</h2>
<div class="level2">

<p>
iw supports modifying TX bitrates, both legacy and HT MCS rates. It does
 this by masking in the allowed bitrates, and also lets you clear the 
mask. 
</p>

</div>

<h3 class="sectionedit13" id="modifying_tx_legacy_bitrates">Modifying tx legacy bitrates</h3>
<div class="level3">

<p>
You can set preference for transmitting using only certain legacy bitrates. For example: 
</p>
<pre class="code">iw wlan0 set bitrates legacy-2.4 12 18 24</pre>

<p>
Here's how to enable what some folks call “Purge G” which disables 802.11b associations: 
</p>
<pre class="code">iw wlan0 set bitrates legacy-2.4 6 12 24</pre>

</div>

<h3 class="sectionedit14" id="modifying_tx_ht_mcs_bitrates">Modifying tx HT MCS bitrates</h3>
<div class="level3">

<p>
Setting preference for transmitting using MCS rates is supported by 
letting you specify the band and MCS rate. Note that whether or not the 
device actually listens to your petition will vary depending on the 
device driver and cooperation from the firmware. For example: 
</p>
<pre class="code">iw dev wlan0 set bitrates mcs-5 4</pre>
<pre class="code">iw dev wlan0 set bitrates mcs-2.4 10</pre>

<p>
To clear all tx bitrates and set things back to normal: 
</p>
<pre class="code">iw dev wlan0 set bitrates mcs-2.4
iw dev wlan0 set bitrates mcs-5</pre>

</div>

<h2 class="sectionedit15" id="setting_tx_power">Setting TX power</h2>
<div class="level2">

<p>
You can set the txpower by using either the device interface name of the respective phy.
</p>
<pre class="code">iw dev &lt;devname&gt; set txpower &lt;auto|fixed|limit&gt; [&lt;tx power in mBm&gt;]
iw phy &lt;phyname&gt; set txpower &lt;auto|fixed|limit&gt; [&lt;tx power in mBm&gt;]</pre>

<p>
(Note that the value this commands takes is in <em>milli</em>bel-milliwatts (mBm) instead of the commonly used <em>deci</em>bel-milliwatts (dBm). &lt;power in mBm&gt; = 100 * &lt;power in dBm&gt;)
</p>

</div>

<h2 class="sectionedit16" id="power_save">Power save</h2>
<div class="level2">

<p>
To enable <a href="https://wireless.wiki.kernel.org/en/developers/documentation/ieee80211/power-savings" class="wikilink1" title="en:developers:documentation:ieee80211:power-savings">power save</a> by default you can use: 
</p>
<pre class="code">sudo iw dev wlan0 set power_save on</pre>

<p>
For mac80211 drivers this means <a href="https://wireless.wiki.kernel.org/en/users/documentation/dynamic-power-save" class="wikilink1" title="en:users:documentation:dynamic-power-save">Dynamic Power Save</a> gets enabled. 
</p>

<p>
To query the current power save settings you can use: 
</p>
<pre class="code">iw dev wlan0 get power_save</pre>

</div>

<h2 class="sectionedit17" id="adding_interfaces_with_iw">Adding interfaces with iw</h2>
<div class="level2">

<p>
There are several modes supported. The modes supported are:
</p>
<ul>
<li class="level1"><div class="li"> monitor </div>
</li>
<li class="level4"><div class="li"> managed [also station] </div>
</li>
<li class="level4"><div class="li"> wds </div>
</li>
<li class="level4"><div class="li"> mesh [also mp] </div>
</li>
<li class="level4"><div class="li"> ibss [also adhoc] To see a description of these please read our <a href="https://wireless.wiki.kernel.org/en/users/documentation/modes" class="wikilink1" title="en:users:documentation:modes">modes documentation</a>. </div>
</li>
</ul>

<p>
For example to add a monitor interface: 
</p>
<pre class="code">iw phy phy0 interface add moni0 type monitor</pre>

<p>
where you can replace 
</p>
<pre class="code">monitor</pre>

<p>
 by anything else and 
</p>
<pre class="code">moni0</pre>

<p>
 by the interface name, and need to replace 
</p>
<pre class="code">phy0</pre>

<p>
 by the PHY name for your hardware (usually phy0 will be correct unless 
you hotplugged or reloaded any modules.) If your udev is configured 
incorrectly, the newly created virtual interface may be renamed by it 
right away, use 
</p>
<pre class="code">ip link</pre>

<p>
 to list all interfaces. To create a new managed mode interface you would use: 
</p>
<pre class="code">iw phy phy0 interface add wlan10 type managed</pre>

<p>
Note that the interface is automatically put into AP mode when using hostapd. 
</p>

</div>

<h3 class="sectionedit18" id="modifying_monitor_interface_flags">Modifying monitor interface flags</h3>
<div class="level3">

<p>
You can customize the type of monitor interface you create. This can be 
very useful for debugging purposes on end user systems. For example, 
suppose you want to help a user. You can take advantage of the fact that
 a monitor interface in mac80211 uses radiotap to pass up to userspace 
additional data. Say we want to help a user fish out data without 
affecting the device's performance by setting it to a full monitor 
interface. A monitor interface with no additional monitor flags can be 
created as follows: 
</p>
<pre class="code">iw dev wlan0 interface add fish0 type monitor flags none</pre>

<p>
You can then request the user to use tcpdump on a session: 
</p>
<pre class="code">tcpdump -i fish0 -s 65000 -p -U -w  /tmp/fishing.dump</pre>

<p>
The nice thing about these type of alternative monitor interfaces is you can further extend radiotap even with <a href="http://www.radiotap.org/Discussion/Vendor-Extensions" class="urlextern" title="http://www.radiotap.org/Discussion/Vendor-Extensions" rel="nofollow">vendor extensions</a> to add more data to radiotap to help debug device specific features. 
</p>

<p>
Keep in mind this requires drivers to honor mac80211's flag requests 
strictly, so drivers like ath5k and ath9k which still enable flags based
 on operation mode need to be fixed to take advantage of this. 
</p>

</div>

<h4 id="monitor_flags_possible">Monitor flags possible</h4>
<div class="level4">

<p>
The following are flags you can specify:
</p>
<ul>
<li class="level1"><div class="li"> none </div>
</li>
<li class="level5"><div class="li"> fcsfail </div>
</li>
<li class="level5"><div class="li"> plcpfail </div>
</li>
<li class="level5"><div class="li"> control </div>
</li>
<li class="level5"><div class="li"> otherbss </div>
</li>
<li class="level5"><div class="li"> cook </div>
</li>
<li class="level5"><div class="li"> active</div>
</li>
</ul>

</div>

<h2 class="sectionedit19" id="deleting_interfaces_with_iw">Deleting interfaces with iw</h2>
<div class="level2">

<p>
Use 
</p>
<pre class="code">iw dev moni0 del</pre>

</div>

<h2 class="sectionedit20" id="virtual_vif_support">Virtual vif support</h2>
<div class="level2">

<p>
There is a dedicated section for virtual vif support, see the <a href="https://wireless.wiki.kernel.org/en/users/documentation/iw/vif" class="wikilink1" title="en:users:documentation:iw:vif">iw vif</a> page. 
</p>

</div>

<h2 class="sectionedit21" id="updating_your_regulatory_domain">Updating your regulatory domain</h2>
<div class="level2">

<p>
The command line is: 
</p>
<pre class="code">iw reg set alpha2</pre>

<p>
Where “alpha2” is the <a href="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" class="urlextern" title="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" rel="nofollow">ISO/IEC 3166 alpha2</a> country code. The information used and set comes from our <a href="https://wireless.wiki.kernel.org/en/developers/regulatory" class="wikilink1" title="en:developers:regulatory">regulatory infrastructure</a>. 
</p>

<p>
You can also use the latest wpa_supplicant (as of 0.6.7) now to change 
your regulatory domain, to do so just add a “country=US” entry into your
 configuration for example. 
</p>

</div>

<h2 class="sectionedit22" id="creating_and_inspecting_mesh_point_interfaces_with_iw">Creating and inspecting Mesh Point interfaces with iw</h2>
<div class="level2">

<p>
You may add a mesh interface to drivers that <span class="curid"><a href="https://wireless.wiki.kernel.org/en/users/documentation/iw" class="wikilink1" title="en:users:documentation:iw">support Mesh Point</a></span>
 operation.  Mesh Point interfaces have a mesh_id parameter which may be
 up to 32 bytes long.  For example, to add an interface “mesh0” to 
device phy0 with mesh_id “mymesh”, 
</p>
<pre class="code">iw phy phy0 interface add mesh0 type mp mesh_id mymesh</pre>

<p>
Mesh Point interfaces, by default, are configured on Channel 1.  Mesh 
Point operation begins when the interface is brought up.  In the default
 configuration, Mesh Point interfaces will automatically detect and 
attempt to create Peer Links with other Mesh Points (peers) having the 
same mesh ID.  Use the <span class="curid"><a href="https://wireless.wiki.kernel.org/en/users/documentation/iw" class="wikilink1" title="en:users:documentation:iw">station list and station statistics</a></span> to see the peer list and Peer Link status. 
</p>

<p>
After sending traffic (ex: pinging another mesh node), you may wish to see a list of Mesh Paths: 
</p>
<pre class="code">iw dev mesh0 mpath dump</pre>

<p>
Please see the <a href="https://github.com/cozybit/open80211s/wiki/HOWTO" class="urlextern" title="https://github.com/cozybit/open80211s/wiki/HOWTO" rel="nofollow">open80211s.org HOWTO</a>
 for further details on Mesh Point related commands and their output, as
 well as more examples.  iw also provides commands for advanced Mesh 
Point configuration.  These are documented in the <a href="https://github.com/cozybit/open80211s/wiki/HOWTO" class="urlextern" title="https://github.com/cozybit/open80211s/wiki/HOWTO" rel="nofollow">Advanced Tinkering</a> section of the open80211s HOWTO. 
</p>

</div>

<h2 class="sectionedit23" id="setting_up_a_wds_peer">Setting up a WDS peer</h2>
<div class="level2">

<p>
WDS mode is a non-standard extension to the IEEE 802.11 standard to 
allow transparent Ethernet bridging on the station and to implement 
seamingless hand-over for wireless clients roaming between different 
access points. Due to its non-standard nature, WDS is often implemented 
differently in wireless drivers and vendor firmwares making them 
incompatible with each other. In order to use WDS, one should use the 
same hardware and software on all deployed wireless devices to maintain 
compatibility. 
</p>

<p>
To create a WDS peer you will first need to create an interface of WDS type, and then set the peer: 
</p>
<pre class="code">iw phy phy0 interface add wds0 type wds
iw dev wds0 set peer &lt;MAC address&gt;</pre>

<p>
In order for this to work the driver must implement the cfg80211 
callback set_wds_peer(). mac80211 implements this callback, so the 
respective mac80211 driver would just need to support WDS type 
interfaces. What WDS will do is replace the first address on the 802.11 
header with the peer address when TXing frames. Instead of using WDS 
though you may want to consider using 4-address mode described below if 
you have control over the software running on the AP and respective 
clients/peers connected. 
</p>

</div>

<h2 class="sectionedit24" id="using_4-address_for_ap_and_client_mode">Using 4-address for AP and client mode</h2>
<div class="level2">

<p>
In some situations it might be useful to run a network with an Access 
Point and multiple clients, but with each client bridged to a network 
behind it. For this to work, both the client and the AP need to transmit
 4-address frames, containing both source and destination MAC addresses.
 4-address mode is how <a href="https://wireless.wiki.kernel.org/en/users/documentation/openwrt" class="wikilink2" title="en:users:documentation:openwrt" rel="nofollow">OpenWrt</a> supports WDS mode for mac80211 drivers, that is if you enable <em>wds</em> option on your <a href="https://wireless.wiki.kernel.org/en/users/documentation/openwrt" class="wikilink2" title="en:users:documentation:openwrt" rel="nofollow">OpenWrt</a> <a href="http://wiki.openwrt.org/doc/uci/wireless" class="urlextern" title="http://wiki.openwrt.org/doc/uci/wireless" rel="nofollow">OpenWrt wireless configuration</a>
 you will end up using 4-address mode. 4-address mode is not compatible 
with other WDS implementations, ie, you'll need all endpoints using this
 mode in order for WDS to work appropriately. 
</p>

<p>
Linux wireless has support for 4-address mode for AP and STAs but each 
driver needs to define this capability explicitly. All mac80211 drivers 
support 4-address mode if AP or STA modes of operation are supported 
respectively. 
</p>

<p>
On the AP side you can enable 4-address frames for individual clients by
 isolating them in separate AP VLANs which are configured in 4-address 
mode. Such an AP VLAN will be limited to one client only, and this 
client will be used as the destination for all traffic on its interface,
 regardless of the destination MAC address in the packet headers. The 
advantage of this mode compared to regular WDS mode is that it's easier 
to configure and does not require a static list of peer MAC addresses on
 any side. 4-address mode is incompatible with WDS. 
</p>

<p>
To enable 4-address mode when creating an interface you should add <em>4addr on</em>, for example: 
</p>
<pre class="code">iw phy phy0 interface add sta0 type managed 4addr on</pre>

<p>
In this mode, the new interface can be in a bridge – if it is then you need to use the 
</p>
<pre class="code">-b</pre>

<p>
 flag to wpa_supplicant to make it listen for EAPOL on the bridge instead of the interface itself. 
</p>

<p>
In hostapd you can enable this with the flag on hostapd.conf: 
</p>
<pre class="code">wds_sta=1</pre>

<p>
Please note 4-address mode is currently broken on 3.9 because of commit 
576eb62598f10c8c7fd75703fe89010cdcfff596 , this topic is currently being
 addressed on the <a href="http://marc.info/?l=linux-wireless&amp;m=136743495526905&amp;w=2" class="urlextern" title="http://marc.info/?l=linux-wireless&amp;m=136743495526905&amp;w=2" rel="nofollow">mailing lists</a> for a resolution. 
</p>

</div>

<h2 class="sectionedit25" id="creating_packet_coalesce_rules">Creating packet coalesce rules</h2>
<div class="level2">

<p>
In most cases, host that receives IPv4 and IPv6 multicast/broadcast 
packets does not do anything with these packets. Therefore the reception
 of these unwanted packets causes unnecessary processing and power 
consumption. 
</p>

<p>
Packet coalesce feature helps to reduce number of receive interrupts to 
host by buffering these packets in firmware/hardware for some predefined
 time. Receive interrupt will be generated when one of the following 
events occur.
</p>
<ul>
<li class="level1"><div class="li"> Expiration of hardware timer whose expiration time is set to maximum coalescing delay of matching coalesce rule. </div>
</li>
<li class="level6"><div class="li"> Coalescing buffer in hardware reaches it's limit. </div>
</li>
<li class="level6"><div class="li"> Packet doesn't match any of the 
configured coalesce rules. To view coalesce configuration support 
information, you can use 'iw phy0 info'. Here is an example output: </div>
</li>
</ul>
<pre class="code">Coalesce support:
         * Maximum 8 coalesce rules supported
         * Each rule contains upto 4 patterns of 1-4 bytes,
           maximum packet offset 50 bytes
         * Maximum supported coalescing delay 100 msecs</pre>

<p>
You need to configure following parameters for creating a coalesce rule.
</p>
<ul>
<li class="level1"><div class="li"> Maximum coalescing delay </div>
</li>
<li class="level7"><div class="li"> List of packet patterns which needs to be matched </div>
</li>
<li class="level7"><div class="li"> Condition for coalescence. pattern 'match' or 'no match' Multiple such rules can be provided through a configuration file. </div>
</li>
</ul>

<p>
To enable coalesce feature using rules listed in coalesce.conf file, you can use: 
</p>
<pre class="code">iw phy phy0 enable coalesce.conf</pre>

<p>
Where coalesce.conf contains: 
</p>
<pre class="code">delay=25
condition=0
patterns=8+34:xx:ad:22,10+23:45:67,59:33:xx:25,ff:ff:ff:ff
delay=40
condition=1
patterns=12+00:xx:12,23:45:67,46:61:xx:50</pre>

<p>
To display current coalesce configuration, you can use: 
</p>
<pre class="code">$ iw phy phy0 coalesce show
Coalesce is enabled:
Rule - max coalescing delay: 25msec condition:match
 * packet offset: 8 pattern: 34:--:ad:22
 * packet offset: 10 pattern: 23:45:67
 * packet offset: 0 pattern: 59:33:--:25
 * packet offset: 0 pattern: ff:ff:ff:ff
Rule - max coalescing delay: 40msec condition:not match
 * packet offset: 12 pattern: 00:--:12
 * packet offset: 0 pattern: 23:45:67
 * packet offset: 0 pattern: 46:61:--:50</pre>

<p>
To disable coalesce feature, you can use: 
</p>
<pre class="code">iw phy phy0 coalesce disable</pre>

<p>
'iw display' output when coalesce is not configured: 
</p>
<pre class="code">$ iw phy phy0 coalesce show
Coalesce is disabled.</pre>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>en/users/documentation/iw.txt</bdi> · Last modified: 2019/06/18 15:02 by <bdi>Paul Michel</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y">

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="https://wireless.wiki.kernel.org/en/users/documentation/iw?do=edit" class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="https://wireless.wiki.kernel.org/en/users/documentation/iw?do=revisions" class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="https://wireless.wiki.kernel.org/en/users/documentation/iw?do=backlink" class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="#dokuwiki__top" class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by/4.0/" rel="license" class="urlextern">Creative Commons Attribution 4.0 International License</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by/4.0/" rel="license"><img src="iw_files/cc-by-40.png" alt="Creative Commons Attribution 4.0 International License"></a>        <a href="http://www.dokuwiki.org/donate" title="Donate"><img src="iw_files/button-donate.gif" alt="Donate" height="15" width="80"></a>
        <a href="http://www.php.net/" title="Powered by PHP"><img src="iw_files/button-php.gif" alt="Powered by PHP" height="15" width="80"></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5"><img src="iw_files/button-html5.png" alt="Valid HTML5" height="15" width="80"></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS"><img src="iw_files/button-css.png" alt="Valid CSS" height="15" width="80"></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki"><img src="iw_files/button-dw.png" alt="Driven by DokuWiki" height="15" width="80"></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="iw_files/indexer.gif" alt="" height="1" width="2"></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->


</body></html>