### ===================================开机进入GRUB不要慌，命令行也可启动Linux
% 会自动更新/boot/grub/grub.cfg，这样做最大的好处是当系统更新内核时，你的设置不会被覆盖掉。
sudo update-grub



% 1. 首先利用ls命令，找到Ubuntu安装在哪个磁盘分区；
%    比如输入ls后我的机器列出的磁盘分区信息如下： ls
(hd0),(hd1),(hd1,gpt3),(hd1,gpt2),(hd1,gpt1)

    查找包含grub.cfg文件的分区
    假定通过 ls (hd1,gpt2)/boot/grub 发现了grub.cfg文件，则表明Linux安装在这个分区

 
% 2.  找到Linux的/boot分区，以及/根分区所在的磁盘位置
% 输入 cat (hd0,gpt2)/etc/fstab,会输出类似下面的信息
% # <file system> <mount point> <type> <options> <dump> <pass>
% # / was on /dev/sda2 during installation
UUID=dd6e0539-1369-4938-8af5-378f02cf05cf   /  ext4  errors=remount-ro  0  1


% 3. 指定Linux内核，及/所在分区
grub> linux /boot/vmlinuz-4.8.0-36-generic ro text root=/dev/sda2


% 4. initrd命令指定initrd文件
grub> initrd /boot/initrd.img-4.8.0-36-generic


% 5. boot引导系统，结束
grub> boot



### ======================================================= 修改grud背景图片

使用GUI修改Grub的Splash背景
首先然我们来使用 GUI 来进行操作吧，这里我们使用 GIMP 来作为图像编辑器。
%   步骤 1、使用 GIMP 打开图像 (路径为：应用  --> 图像  --> GIMP 程序 )

%   步骤 2、现在我们需要按实际情况将图像缩放到 640x480 大小。为此，
%   需要点击 图像  --> 缩放图像。记住，要如下图参数进行设置。修改宽度为 640，高度为 480。其他保持不变。
    点击 缩放 按钮

%   步骤 3、然后，我们需要索引图像，让它仅使用 14 色。为此，
%   点击 图像  --> 模式  --> 索引 。点选 生成最优调色板  选项，并设置颜色最大值 为 14 .
    点击 转换 按钮

%   步骤 4、保存文件。这里以文件名为 “UxTechno.xpm” 来保存。

%   步骤 5、以 Zip 方式压缩文件。为此，转到文件的保存位置 --> 右击并选择 压缩 选项，选择 gzip 方法来压缩。

%   步骤 6、现在复制或移动 "UxTechno.xpm.gz" 到 /boot/grub/UxTechno.xpm.gz。

%   步骤 7、这一步，打开 /boot/grub/grub.conf 文件编辑 splashimage 参数如下，并保存文件。
%   最后，文件的内容应该是像这样的：
# grub.conf
generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE: You have a /boot partition. This means
that # all kernel and initrd paths are relative to /boot/, eg. # root
(hd0,0) # kernel /vmlinuz-version ro root=/dev/sda2 # initrd
/initrd-[generic-]version.img #boot=/dev/sda default=0 timeout=5
splashimage=(hd0,0)/grub/UxTechno.xpm.gz
hiddenmenu   
title Red Hat Enterprise Linux (2.6.32-220.el6.x86_64)
root (hd0,0)
kernel /vmlinuz-2.6.32-220.el6.x86_64 ro root=UUID=1d8c5075-1a5b-4fdc-ba15-0458b65c6012 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD quiet SYSFONT=latarcyrheb-sun16 rhgb
crashkernel=auto KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM initrd
/initramfs-2.6.32-220.el6.x86_64.img
% 当你重启服务器之后，你讲看到如下效果的 splash 背景图像：




### ======================================================= ImageMagick_cli
% 源代码 https://www.imagemagick.org/download/ImageMagick.tar.gz
% 库地址 https://www.imagemagick.org/download/delegates/
% 开始安装
% 需要先安装库文件
    将下载的文件上传到服务器中，或者直接在服务器里面通过wget命令下载
    解压 tar -xzvf tiff-4.0.8.tar.gz
    进入目录 cd tiff-4.0.8
    执行 ./configure
    执行 make && make install
    没有报错就结束了，可能有些会出现编译错误gcc找不到，需要下载gcc

% 安装imagemagick
    解压 tar -xzvf ImageMagick-7.0.8-15
    进入目录 cd ImageMagick-7.0.8-15
    执行 ./configure，执行结束后在结尾可以看到已链接到tif
    执行 make && make install
    执行 ldconfig /usr/local/lib
    检测是否成功 convert -version
    出现如下就是成功了
    如果出现convert command notfound，需要配置环境变量
    vim /etc/profile 添加如下：
    export ImageMagick_HOME=/usr/local/ImageMagick
    export PATH=$PATH:$ImageMagick_HOME/bin
%  测试： convert input.tif output.pdf 执行成功当前目录下会生成output.pdf



% 使用命令行修改Grub的Splash背景
% 如果说你是命令行的超级粉丝，那就使用如下方法吧。
% 我们还需要在 Linux 系统上安装好 ImageMagick
% 然后，继续接下来的配置。这里我使用 UxTechno 的 logo 来做 splash 背景图像。
% 步骤 1、使用如下命令来转换像素深度。
# convert -depth 8 -colors 14 -resize 640x480 uxtechno_logo.jpg uxtechno_logo.xpm
上述选项的意义如下：
1.最大使用 14 色
2.分辨率为 640x480
3.使用 xpm 格式

% 步骤 2、以 Zip 方式压缩文件。
# gzip uxtechno_logo.xpm

% 步骤 3、复制文件到 /boot 分区。
# cp uxtechno_logo.xpm.gz /boot/grub/

% 步骤 4、在 /boot/grub/grub.conf 文件中修改 splashimage 参数如下，并保存文件。
splashimage=(hd0,0)/grub/uxtechno_logo.xpm

% 步骤 5、最后，使用 reboot 命令重启服务器。启动界面将显示使用 GUI 方式第 7 步中的图像。








